name: Quality Checks

on:
  workflow_call:

jobs:

  linting:
    uses: ./.github/workflows/_node_job.yaml
    with:
      name: ğŸ§¹  Linting
      run: pnpm lint

  typeCheck:
    uses: ./.github/workflows/_node_job.yaml
    with:
      name: ğŸ”  Type Check
      run: pnpm typecheck

  unitTest:
    uses: ./.github/workflows/_node_job.yaml
    with:
      name: ğŸ§ª  Unit Test
      run: pnpm test
      timeout-minutes: 15

security:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
          token: ${{ github.token }}
      - name: Run Snyk to check for vulnerabilities
        uses: snyk/actions/node@master
        env:
          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
